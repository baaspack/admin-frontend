!function(e){var n={};function t(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(s,o,function(n){return e[n]}.bind(null,o));return s},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var s=(e,n)=>({sendRequest(t,s="GET",o,a=!0){const r=`${e}${t}`,i={method:s,headers:{authorization:"key "+n},credentials:"include"};if(o){"object"!==typeof o&&(o={data:o}),o instanceof FormData?i.body=o:(i.headers["content-type"]="application/json",i.body=JSON.stringify(o))}return fetch(r,i).then(e=>((e,n)=>e.ok?n?e.json():e:Promise.reject(new Error(e.statusText)))(e,a))}});var o=e=>({register:(n,t)=>e.sendRequest("/register","POST",{email:n,password:t}),login:(n,t)=>e.sendRequest("/login","POST",{email:n,password:t}),logout:()=>e.sendRequest("/logout","POST")});var a=e=>({getCollection:n=>e.sendRequest("/"+n),getResource:(n,t)=>e.sendRequest(`/${n}/${t}`),createResource:(n,t)=>e.sendRequest("/"+n,"POST",t),deleteResource:(n,t)=>e.sendRequest(`/${n}/${t}`,"DELETE"),updateResource:(n,t,s)=>e.sendRequest(`/${n}/${t}`,"PATCH",s),overwriteResource:(n,t,s)=>e.sendRequest(`/${n}/${t}`,"PUT",s),getCollectionsList:()=>e.sendRequest("/collections"),createNewCollection:n=>e.sendRequest("/collections","POST",{collectionName:n})});const r=e=>({findResource(e,n){this.sendMessage({action:"find",collection:e,query:n})},getCollection(e){this.sendMessage({action:"getAll",collection:e})},getResource(e,n){this.sendMessage({action:"getOne",collection:e,id:n})},createResource(e,n){this.sendMessage({action:"create",collection:e,data:n})},overwriteResource(e,n,t){this.sendMessage({action:"update",collection:e,id:n,data:t})},updateResource(e,n,t){this.sendMessage({action:"patch",collection:e,id:n,data:t})},deleteResource(e,n){this.sendMessage({action:"delete",collection:e,id:n})},joinUsersChannels(e){this.sendMessage({action:"joinUsersChannels",usersInformationCollection:e})},createChannel(e,n,t){this.sendMessage({action:"createChannel",usersInformationCollection:e,channelType:n,name:t})},joinChannel(e,n,t){this.sendMessage({action:"joinChannel",usersInformationCollection:e,channelType:n,channelId:t})},leaveChannel(e,n,t){this.sendMessage({action:"leaveChannel",usersInformationCollection:e,channelType:n,channelId:t})},changeChannel(e,n,t){this.sendMessage({action:"changeChannel",usersInformationCollection:e,channelType:n,channelId:t})},deleteChannel(e,n,t,s){this.sendMessage({action:"deleteChannel",usersInformationCollection:e,channelMessagesCollection:n,channelType:t,channelId:s})},open(e){e.action="open",this.sendMessage(e)},close(e){e.action="close",this.sendMessage(e)},broadcast(e){e.action="broadcast",this.sendMessage(e)},sendMessage(n){e.send(JSON.stringify(n))}});var i=e=>{const n=new WebSocket(e.replace("http","ws"));return n.actions=r(n),n};var l=e=>({getFile:(n,t)=>e.sendRequest(`/uploads/${n}/${t}`,"GET",null,!1),getListOfUserFiles:n=>e.sendRequest("/uploads/"+n),uploadFile(n,t,s){if(!n.size)return"no form submitted";const o=new FormData;return o.append("bucket",s),o.append("filename",t),o.append("file",n),e.sendRequest("/uploads","POST",o)},updateFile(n,t,s){const o=new FormData;return o.append("bucket",s),o.append("filename",t),e.sendRequest("/uploads/"+n,"PATCH",o)},deleteFile:n=>e.sendRequest("/uploads/"+n,"DELETE"),overwriteFile(n,t){if(!n)return"no form submitted";const s=new FormData;return s.append("filename",t),s.append("file",n),e.sendRequest("/uploads/"+t,"PUT",s)}});n.default=(e,n)=>{const t=s(e,n);return{auth:o(t),db:a(t),ws:()=>i(n),storage:l(t)}}}]);